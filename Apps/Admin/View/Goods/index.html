<body>
    <table id="goodsdg" title="商品列表" class="easyui-datagrid" style="width:100%;" url="{:U('Goods/goodsList')}"  toolbar="#goodstoolbar" pagination="true" pageSize='15' pageNumber='1' multiSort='true' sortOrder="desc" pageList="[2,5,10,15,20,25,30,40,50]" rownumbers="true" fitColumns="true" singleSelect="true">
        <thead>
            <tr>
                <th field="code" width="10" sortable="true">编码</th>
                <th field="name" width="50" sortable="true">商品名称</th>
                <th field="cate_id" sortable="true">类别</th>
                <th field="shop_id" width="50">商铺</th>
                <th field="price" width="50">单价（分）</th>
                <th field="price" width="50">特价</th>
                <th field="add_time" formatter="timestampToDateTime">添加时间</th>
                <th field="update_time">更新时间</th>
            </tr>
        </thead>
    </table>

    <div id="goodstoolbar">
        <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="showTab('{:U(\'Goods/add\')}', '添加商品')">添加</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-edit" plain="true" onclick="showTab('{:U(\'Goods/add\')}', '添加商品')">编辑</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-redo" plain="true" onclick="importGoods()">导入</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-print" plain="true" onclick="exportGoods()">导出</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="destroyShop()">删除</a>
        <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon icon-switch" plain="true" onclick="showTab('{:U(\'Cate/index\')}', '套餐管理')">套餐管理</a>
       
        <form id="shopSearch" method="post" novalidate style="display:inline-block;margin-left:50px;">
             <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon icon-all" plain="true" onclick="showAll()">全部</a>     
            <input id='searchBox' class="easyui-searchbox" data-options="height:30,menu:'#searchboxSelect',searcher:doSearch"  style="width:300px"/>
                <div id="searchboxSelect">
                    <div data-options="name:'code',iconCls:'icon-application'">商品编码</div>
                    <div data-options="name:'name',iconCls:'icon-group_go'">商品名称</div>
                </div>
        
        </form>
    </div>
    
    

   <script type="text/javascript">

        //搜索
        function doSearch(value,name){
            if(value==''){
                $.messager.alert('搜索提示','搜索内容不能为空!','error');
            }else{
                var searchName=$('#searchBox').searchbox('getName');
                var searchValue=$('#searchBox').searchbox('getValue');
                switch(searchName){
                    case 'shop_name':
                        $('#shopdg').datagrid('load',{
                            shop_name:searchValue
                        });
                        break;
                    case 'link_tel':
                        $('#shopdg').datagrid({ queryParams:{link_tel:searchValue}});
                        break;
                }
            }
        }

        //显示全部数据
        function showAll(){
            $('#goodsdg').datagrid({ queryParams:''});
        }

       

    </script>
    <style type="text/css">
        #fm{
            margin:0;
            padding:10px;
        }
    </style>
    
</body>